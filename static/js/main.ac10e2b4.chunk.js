(this["webpackJsonpreact-app-without-name"]=this["webpackJsonpreact-app-without-name"]||[]).push([[0],{45:function(e,t,r){},51:function(e,t,r){},76:function(e,t,r){},82:function(e,t,r){},84:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(17),s=r.n(a),i=(r(45),r(11)),u=r(28),o=r(6),l="SET_CURRENCY",j="SET_IS_FETCHING",b="SET_FETCH_ERROR",d="SET_CURRENCY_SUM",h="SET_QUERY_OPTIONS",y={baseCurrency:"",queryOptions:{},currencyList:{},isFetching:!1,currencySum:"",fetchError:{isError:!1,errorMsg:""}},p=function(e){return{type:l,payload:{baseCurrency:e.base_code,currencyList:e.conversion_rates}}},O=function(e){return{type:j,payload:e}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:b,payload:{status:e,msg:t}}},x=(r(51),r(13)),m=r(5),v=r(16),g=r(29),C=r(22),_=r.n(C),N=r(32);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UAH";return function(){var t=Object(N.a)(_.a.mark((function t(r){var c,n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(O(!0)),t.next=4,fetch("https://v6.exchangerate-api.com/v6/".concat("e5481594a567378153957dbb","/latest/").concat(e));case 4:return c=t.sent,t.next=7,c.json();case 7:if("success"!==(n=t.sent).result){t.next=12;break}r(p(n)),t.next=13;break;case 12:throw Error(n["error-type"]);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),r(f(!0,t.t0.message));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()}var S=function(e,t,r){var c=[],n=[],a=[],s=[];if(Number.isInteger(parseInt(e[0]))){for(var i in e)(Number.isInteger(+e[i])||"."===e[i])&&c.push(e[i])," "===e[i]||Number.isInteger(+e[i])||"."===e[i]||0!==n.length&&0!==a.length||s.length<3&&(" "===e[+i+1]&&s.length<2?s=[]:(s.push(e[i]),3===s.length&&(0===n.length?(n=Object(g.a)(s),s=[]):(a=Object(g.a)(s),s=[]))));return n=n.join("").toUpperCase(),a=a.join("").toUpperCase(),c=Number(c.join("")).toFixed(2),Object.keys(r).includes(n)?Object.keys(r).includes(a)?(t(function(e){var t=e.firstCurrency,r=e.secondCurrency,c=e.numberValue;return{type:h,payload:{firstCurrency:t,secondCurrency:r,numberValue:c}}}({firstCurrency:n,secondCurrency:a,numberValue:c})),void t(E(n))):void t(f(!0,"Unsupported code [".concat(a,"]"))):void t(f(!0,"Unsupported code [".concat(n,"]")))}t(f(!0,"Incorrect query"))},k=r(18),T=r.n(k),w=r(2);var F=function(e){var t=e.errorType,r=e.dispatch;return Object(c.useEffect)((function(){setTimeout((function(){r(f(!1))}),3e3)}),[]),Object(w.jsx)("div",{className:"error-info",children:t})},L=r(34),I=r(33);var U=function(e){var t=e.inputValue,r=e.setInputValue,c=e.handleButton;return Object(w.jsxs)("div",{className:"home-exchanger exchanger",children:[Object(w.jsx)("h1",{className:"exchanger__title",children:"Currency Exchanger"}),Object(w.jsx)("input",{"data-testid":"input",type:"text",className:"exchanger__input",value:t,placeholder:"15 RUB in USD",onChange:function(e){r(e.target.value),function(e,t){var r,c=Object(I.a)(e);try{for(c.s();!(r=c.n()).done;)","===r.value&&t(e.replace(/,/gi,"."))}catch(n){c.e(n)}finally{c.f()}}(t,r)}}),Object(w.jsx)("button",{className:"exchanger__btn","data-testid":"btn",onClick:c,children:"Calculate"}),Object(w.jsxs)(x.b,{to:"/currency",className:"exchanger__link link",children:["Currency List",Object(w.jsx)(L.a,{className:"link-item"})]})]})},V=(r(76),function(e,t){return 0!==Object.keys(t).length&&"".concat(t.numberValue," ").concat(t.firstCurrency," = ").concat((e[t.secondCurrency]*t.numberValue).toFixed(2)," ").concat(t.secondCurrency)});var q=function(e){var t=e.currencyList,r=e.queryOptions;return Object(w.jsx)("div",{className:"home__currency-info info",children:Object(w.jsx)("h1",{className:"info__description",children:V(t,r)})})};var R=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.isFetching})),r=Object(c.useState)(""),n=Object(v.a)(r,2),a=n[0],s=n[1],u=Object(i.c)((function(e){return e.currencyList})),o=Object(i.c)((function(e){return e.fetchError})),l=Object(i.c)((function(e){return e.queryOptions}));return Object(c.useEffect)((function(){e(E())}),[]),Object(w.jsxs)("div",{className:"home",children:[Object(w.jsx)("div",{className:"home-wrapper",children:Object(w.jsx)(U,{"data-testid":"exchanger",inputValue:a,setInputValue:s,handleButton:function(){if(a.length<1)e(f(!0,"Empty query"));else{if(a.length<12)return e(f(!0,"Short query")),void s("");S(a.replace(/,/gi,"."),e,u),s("")}}})}),o.isError?Object(w.jsx)(F,{dispatch:e,errorType:o.errorMsg}):t?Object(w.jsx)("div",{className:"home-loader",style:{marginTop:"10px"},children:Object(w.jsx)(T.a,{type:"TailSpin",color:"blue",height:100,width:100,timeout:3e3})}):0===Object.keys(l).length?"":Object(w.jsx)(q,{currencyList:u,queryOptions:l})]})},M=r(19),B=r.n(M);var H=function(e){var t=e.name,r=e.baseCurrency,c=e.value;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"list__item item",children:[Object(w.jsx)("div",{className:"item__flag-origin",children:Object(w.jsx)(B.a,{currency:t,size:"xl"})}),Object(w.jsx)("div",{className:"item__description",children:"1 ".concat(r," = ").concat(c.toFixed(2)," ").concat(t)})]})})};var Y=function(e){var t=e.currencyList,r=e.baseCurrency;return Object(w.jsx)("div",{className:"info-list list",children:Object.entries(t).filter((function(e){return Object(v.a)(e,1)[0]!==r})).map((function(e,t){var c=Object(v.a)(e,2),n=c[0],a=c[1];return Object(w.jsx)(H,{name:n,value:a,baseCurrency:r},t)}))})},z=r(37);var J=function(e){var t=e.baseCurrency,r=e.currencyList,c=e.handleChange;return Object(w.jsxs)("div",{className:"info-selected__currency currency_selector selector",children:[Object(w.jsx)("div",{className:"selector__title",children:"Selected Currency:"}),Object(w.jsx)("div",{className:"selector__flag",children:Object(w.jsx)(B.a,{currency:t,size:"xl"})}),Object(w.jsx)("div",{className:"selector__body",children:Object(w.jsx)("select",{value:t,onChange:c,children:Object.keys(r).map((function(e,t){return Object(w.jsx)("option",{value:e,children:e},t)}))})}),Object(w.jsx)(x.b,{to:"/",children:Object(w.jsx)(z.a,{className:"selector__search"})})]})};r(82);var A=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e})),r=t.baseCurrency,n=t.currencyList,a=t.isFetching;return Object(c.useEffect)((function(){e(E())}),[]),Object(w.jsx)("div",{className:"currency-info currency",children:Object(w.jsx)("div",{className:"currency-wrapper",children:a?Object(w.jsx)("div",{className:"currency-loader",children:Object(w.jsx)(T.a,{type:"TailSpin",color:"blue",height:100,width:100,timeout:3e3})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J,{baseCurrency:r,currencyList:n,handleChange:function(t){e(E(t.target.value))}}),Object(w.jsx)(Y,{baseCurrency:r,currencyList:n})]})})})};var D=function(){return Object(w.jsx)("div",{className:"app",children:Object(w.jsx)("div",{className:"app-wrapper",children:Object(w.jsx)(x.a,{children:Object(w.jsxs)(m.d,{children:[Object(w.jsx)(m.b,{path:"/",exact:!0,component:R}),Object(w.jsx)(m.b,{path:"/currency",component:A}),Object(w.jsx)(m.a,{to:"/"})]})})})})},G=r(38),P=(r(83),Object(u.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{baseCurrency:t.payload.baseCurrency,currencyList:t.payload.currencyList,isFetching:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.payload});case b:return Object(o.a)(Object(o.a)({},e),{},{queryOptions:{},isFetching:t.payload.status,fetchError:{isError:t.payload.status,errorMsg:t.payload.msg}});case d:return Object(o.a)(Object(o.a)({},e),{},{currencySum:t.payload});case h:return Object(o.a)(Object(o.a)({},e),{},{queryOptions:{firstCurrency:t.payload.firstCurrency,secondCurrency:t.payload.secondCurrency,numberValue:t.payload.numberValue}});default:return Object(o.a)({},e)}}),Object(u.a)(G.a)));s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(i.a,{store:P,children:Object(w.jsx)(D,{})})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.ac10e2b4.chunk.js.map