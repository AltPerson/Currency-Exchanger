(this["webpackJsonpreact-app-without-name"]=this["webpackJsonpreact-app-without-name"]||[]).push([[0],{45:function(e,r,c){},75:function(e,r,c){},81:function(e,r,c){},82:function(e,r,c){"use strict";c.r(r);var t=c(1),n=c.n(t),a=c(17),s=c.n(a),i=(c(45),c(13)),u=c(5),o=c(16),l=c(11),j=c(29),b=c(6),d="SET_CURRENCY",h="SET_IS_FETCHING",y="SET_FETCH_ERROR",p="SET_CURRENCY_SUM",O="SET_QUERY_OPTIONS",f={baseCurrency:"",queryOptions:{},currencyList:{},isFetching:!1,currencySum:"",fetchError:{isError:!1,errorMsg:""}},x=function(e){return{type:d,payload:{baseCurrency:e.base_code,currencyList:e.conversion_rates}}},m=function(e){return{type:h,payload:e}},v=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:y,payload:{status:e,msg:r}}},g=function(e){var r=e.firstCurrency,c=e.secondCurrency,t=e.numberValue;return{type:O,payload:{firstCurrency:r,secondCurrency:c,numberValue:t}}},C=c(22),_=c.n(C),N=c(32);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UAH";return function(){var r=Object(N.a)(_.a.mark((function r(c){var t,n;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c(m(!0)),r.next=4,fetch("https://v6.exchangerate-api.com/v6/".concat("e5481594a567378153957dbb","/latest/").concat(e));case 4:return t=r.sent,r.next=7,t.json();case 7:if("success"!==(n=r.sent).result){r.next=12;break}c(x(n)),r.next=13;break;case 12:throw Error(n["error-type"]);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),c(v(!0,"Unsupported code [".concat(e,"]")));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e){return r.apply(this,arguments)}}()}var S=c(18),k=c.n(S),T=c(2);var w=function(e){var r=e.errorType,c=e.dispatch;return Object(t.useEffect)((function(){setTimeout((function(){c(v(!1))}),3e3)}),[]),Object(T.jsx)("div",{role:"alert",className:"error-info",children:r})},F=c(34),L=c(33);var I=function(e){var r=e.inputValue,c=e.setInputValue,t=e.handleButton;return Object(T.jsxs)("div",{className:"home-exchanger exchanger",children:[Object(T.jsx)("h1",{className:"exchanger__title",children:"Currency Exchanger"}),Object(T.jsx)("input",{"data-testid":"input",type:"text",className:"exchanger__input",value:r,placeholder:"15 RUB in USD",onChange:function(e){c(e.target.value),function(e,r){var c,t=Object(L.a)(e);try{for(t.s();!(c=t.n()).done;)","===c.value&&r(e.replace(/,/gi,"."))}catch(n){t.e(n)}finally{t.f()}}(r,c)}}),Object(T.jsx)("button",{className:"exchanger__btn","data-testid":"btn",onClick:t,children:"Calculate"}),Object(T.jsxs)(i.b,{to:"/currency",className:"exchanger__link link",children:["Currency List",Object(T.jsx)(F.a,{className:"link-item"})]})]})},U=(c(75),function(e,r){return 0!==Object.keys(r).length&&"".concat(r.numberValue," ").concat(r.firstCurrency," = ").concat((e[r.secondCurrency]*r.numberValue).toFixed(2)," ").concat(r.secondCurrency)});var V=function(e){var r=e.currencyList,c=e.queryOptions,t=e.dispatch;return Object.keys(r).includes(c.secondCurrency)?Object(T.jsx)("div",{className:"home__currency-info info",children:Object(T.jsx)("h1",{className:"info__description",children:U(r,c)})}):(t(v(!0,"Unsupported code [".concat(c.secondCurrency,"]"))),"")};var q=function(){var e=Object(l.b)(),r=Object(l.c)((function(e){return e.isFetching})),c=Object(t.useState)(""),n=Object(o.a)(c,2),a=n[0],s=n[1],i=Object(l.c)((function(e){return e.currencyList})),u=Object(l.c)((function(e){return e.fetchError})),b=Object(l.c)((function(e){return e.queryOptions}));return Object(T.jsxs)("div",{className:"home",children:[Object(T.jsx)("div",{className:"home-wrapper",children:Object(T.jsx)(I,{"data-testid":"exchanger",inputValue:a,setInputValue:s,handleButton:function(){if(a.length<1)e(v(!0,"Empty query"));else{if(a.length<12)return e(v(!0,"Short query")),void s("");!function(e,r,c){var t=[],n=[],a=[],s=[];if(Number.isInteger(parseInt(e[0]))){for(var i in e)(Number.isInteger(+e[i])||"."===e[i])&&t.push(e[i])," "===e[i]||Number.isInteger(+e[i])||"."===e[i]||0!==n.length&&0!==a.length||s.length<3&&(" "===e[+i+1]&&s.length<2?s=[]:(s.push(e[i]),3===s.length&&(0===n.length?(n=Object(j.a)(s),s=[]):(a=Object(j.a)(s),s=[]))));n=n.join("").toUpperCase(),a=a.join("").toUpperCase(),t=Number(t.join("")).toFixed(2),r(g({firstCurrency:n,secondCurrency:a,numberValue:t})),r(E(n))}else r(v(!0,"Incorrect query"))}(a.replace(/,/gi,"."),e),s("")}}})}),u.isError?Object(T.jsx)(w,{dispatch:e,errorType:u.errorMsg}):r?Object(T.jsx)("div",{className:"home-loader",style:{marginTop:"10px"},children:Object(T.jsx)(k.a,{type:"TailSpin",color:"blue",height:100,width:100,timeout:3e3})}):void 0===b.firstCurrency||0===Object.keys(b).length?"":Object(T.jsx)(V,{currencyList:i,queryOptions:b,dispatch:e})]})},R=c(19),M=c.n(R);var B=function(e){var r=e.name,c=e.baseCurrency,t=e.value;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"list__item item",children:[Object(T.jsx)("div",{className:"item__flag-origin",children:Object(T.jsx)(M.a,{currency:r,size:"xl"})}),Object(T.jsx)("div",{className:"item__description",children:"1 ".concat(c," = ").concat(t.toFixed(2)," ").concat(r)})]})})};var H=function(e){var r=e.currencyList,c=e.baseCurrency;return Object(T.jsx)("div",{className:"info-list list",children:Object.entries(r).filter((function(e){return Object(o.a)(e,1)[0]!==c})).map((function(e,r){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(T.jsx)(B,{name:n,value:a,baseCurrency:c},r)}))})},Y=c(37);var z=function(e){var r=e.baseCurrency,c=e.currencyList,t=e.handleChange;return Object(T.jsxs)("div",{className:"info-selected__currency currency_selector selector",children:[Object(T.jsx)("div",{className:"selector__title",children:"Selected Currency:"}),Object(T.jsx)("div",{className:"selector__flag",children:Object(T.jsx)(M.a,{currency:r,size:"xl"})}),Object(T.jsx)("div",{className:"selector__body",children:Object(T.jsx)("select",{value:r,onChange:t,children:Object.keys(c).map((function(e,r){return Object(T.jsx)("option",{value:e,children:e},r)}))})}),Object(T.jsx)(i.b,{to:"/",children:Object(T.jsx)(Y.a,{className:"selector__search"})})]})};c(81);var J=function(){var e=Object(l.b)(),r=Object(l.c)((function(e){return e})),c=r.baseCurrency,n=r.currencyList,a=r.isFetching;return Object(t.useEffect)((function(){e(g({})),e(E())}),[]),Object(T.jsx)("div",{className:"currency-info currency",children:Object(T.jsx)("div",{className:"currency-wrapper",children:a?Object(T.jsx)("div",{className:"currency-loader",children:Object(T.jsx)(k.a,{type:"TailSpin",color:"blue",height:100,width:100,timeout:3e3})}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(z,{baseCurrency:c,currencyList:n,handleChange:function(r){e(E(r.target.value))}}),Object(T.jsx)(H,{baseCurrency:c,currencyList:n})]})})})};var A=function(){return Object(T.jsx)("div",{className:"app",children:Object(T.jsx)("div",{className:"app-wrapper",children:Object(T.jsx)(i.a,{children:Object(T.jsxs)(u.d,{children:[Object(T.jsx)(u.b,{path:"/",component:q,exact:!0}),Object(T.jsx)(u.b,{path:"/currency",component:J}),Object(T.jsx)(u.a,{to:"/"})]})})})})},D=c(38),G=c(28),P=Object(G.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case d:return Object(b.a)(Object(b.a)({},e),{},{baseCurrency:r.payload.baseCurrency,currencyList:r.payload.currencyList,isFetching:!1});case h:return Object(b.a)(Object(b.a)({},e),{},{isFetching:r.payload});case y:return Object(b.a)(Object(b.a)({},e),{},{queryOptions:{},isFetching:r.payload.status,fetchError:{isError:r.payload.status,errorMsg:r.payload.msg}});case p:return Object(b.a)(Object(b.a)({},e),{},{currencySum:r.payload});case O:return Object(b.a)(Object(b.a)({},e),{},{queryOptions:{firstCurrency:r.payload.firstCurrency,secondCurrency:r.payload.secondCurrency,numberValue:r.payload.numberValue}});default:return Object(b.a)({},e)}}),Object(G.a)(D.a));s.a.render(Object(T.jsx)(n.a.StrictMode,{children:Object(T.jsx)(l.a,{store:P,children:Object(T.jsx)(A,{})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.61713cb6.chunk.js.map